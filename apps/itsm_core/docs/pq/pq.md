# PQ（性能適格性確認）: ITSM Core（SoR）

## 目的

- バックフィル（GitLab Issue/決定）や監査イベント投入が、運用上のデータ量・頻度に対して成立することを確認する。
- 外部 API（GitLab/LLM）依存で失敗が起きた場合に、原因特定と再実行が可能であることを確認する。

## 対象

- SoR への投入（`itsm.audit_event` / `itsm.(incident/service_request/problem/change_request)` / `itsm.external_ref`）
- バックフィル実行（n8n ワークフロー / スクリプト）
- OQ: `apps/itsm_core/docs/oq/oq.md`

## 想定負荷・制約

- GitLab の Issue/Note 数が多い場合の走査時間
- LLM 判定（任意）による外部 API 呼び出し回数・コスト
- DB の書き込み量（監査イベントの追加）

## 測定/確認ポイント（最低限）

- バックフィルがタイムアウトせず完走できる（分割/期間指定等の運用が可能である）
- 失敗時に原因が追跡でき、再実行して冪等に回復できる（重複投入で壊れない）

## 実施手順（最小）

1. テスト投入（OQ）を実施し、基本投入が成立することを確認する。
2. 実データのバックフィルを限定条件（対象プロジェクト/期間/上限）で実行し、完走性と失敗時の追跡可能性を確認する。

## 合否判定（最低限）

- 限定条件のバックフィルが完走し、失敗時も追跡と再実行が可能であること

## 証跡（evidence）

- バックフィル実行ログ（件数、時間、エラー）
- n8n 実行履歴（成功/失敗、リトライ）

